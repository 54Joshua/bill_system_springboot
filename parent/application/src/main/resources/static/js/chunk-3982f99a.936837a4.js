(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3982f99a"],{9945:function(e,t,l){},9991:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-form",{ref:"selectSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.selectSearch,rules:e.selectSearchRules}},[l("el-form-item",{attrs:{label:"进出"}},[l("dic-select",{staticClass:"search_select",attrs:{"en-name":"inOrOut",size:"mini"},model:{value:e.selectSearch.inOutStatus,callback:function(t){e.$set(e.selectSearch,"inOutStatus",t)},expression:"selectSearch.inOutStatus"}})],1),l("el-form-item",{attrs:{label:"时间",prop:"billTimeType"}},[l("select-time",{staticClass:"search_select",attrs:{size:"mini"},model:{value:e.selectSearch.billTimeType,callback:function(t){e.$set(e.selectSearch,"billTimeType",t)},expression:"selectSearch.billTimeType"}})],1),l("span",{directives:[{name:"show",rawName:"v-show",value:e.timeShow,expression:"timeShow"}],staticClass:"time_show"},[l("span",{directives:[{name:"show",rawName:"v-show",value:e.atTimeShow,expression:"atTimeShow"}]},[l("el-form-item",{attrs:{prop:"atTime"}},[l("el-date-picker",{staticClass:"select_time",attrs:{type:"date",size:"mini",placeholder:"选择日期"},model:{value:e.selectSearch.atTime,callback:function(t){e.$set(e.selectSearch,"atTime",t)},expression:"selectSearch.atTime"}})],1)],1),l("span",{directives:[{name:"show",rawName:"v-show",value:e.betweenTimeShow,expression:"betweenTimeShow"}],staticClass:"time_show"},[l("el-form-item",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{prop:"startTime"}},[l("el-date-picker",{staticClass:"select_time",attrs:{type:"date",size:"mini",placeholder:"选择日期"},model:{value:e.selectSearch.startTime,callback:function(t){e.$set(e.selectSearch,"startTime",t)},expression:"selectSearch.startTime"}})],1)],1),l("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{prop:"endTime"}},[l("el-date-picker",{staticClass:"select_time",attrs:{type:"date",size:"mini",placeholder:"选择日期"},model:{value:e.selectSearch.endTime,callback:function(t){e.$set(e.selectSearch,"endTime",t)},expression:"selectSearch.endTime"}})],1)],1)],1)],1)]),l("el-form-item",[l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getTypeResult}},[e._v("确 定")])],1),l("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-pie-chart",circle:""},on:{click:e.echartShow}})],1),l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.statType.selectStaticsVOS,border:"",height:"500px","summary-method":e.getSummaries,"show-summary":""}},[l("el-table-column",{attrs:{type:"index",index:e.indexMethod,width:"50px"}}),l("el-table-column",{attrs:{prop:"name",label:"姓名"}}),l("el-table-column",{attrs:{prop:"count",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.showDetail(t.row)}}},[e._v(e._s(t.row.count))])]}}])}),l("el-table-column",{attrs:{prop:"sum",label:"金额（元）"}})],1),l("el-dialog",{attrs:{title:"图片显示",visible:e.dialog.dialogEchartShow,width:"500px"},on:{"update:visible":function(t){return e.$set(e.dialog,"dialogEchartShow",t)}}},[l("div",{ref:"typeEchartId",staticClass:"type_echart"}),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialog.dialogEchartShow=!1}}},[e._v("确 定")])],1)]),l("el-dialog",{attrs:{title:"帐目显示",visible:e.dialog.dialogBillShow,width:"60%"},on:{"update:visible":function(t){return e.$set(e.dialog,"dialogBillShow",t)}}},[l("table-bill",{attrs:{billData:e.bills}}),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialog.dialogBillShow=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],s=(l("b0c0"),l("5c3d")),c=l.n(s),r=l("ca36"),o=l("30d2"),n=l("e5f3"),u=l("7683"),h=l("9944"),m={name:"BillStatistics",components:{dicSelect:o["a"],selectTime:n["a"],tableBill:u["a"]},data:function(){return{selectSearch:{inOutStatus:null,billTimeType:null,atTime:null,startTime:null,endTime:null},selectSearchRules:{atTime:null,startTime:null,endTime:null},statType:{selectStaticsVOS:[],totalCount:0,totalSum:0},dialog:{dialogEchartShow:!1,dialogBillShow:!1},bills:[]}},computed:{atTimeShow:function(){return"5"===this.selectSearch.billTimeType||"6"===this.selectSearch.billTimeType||"7"===this.selectSearch.billTimeType},betweenTimeShow:function(){return"8"===this.selectSearch.billTimeType},timeShow:function(){return this.atTimeShow||this.betweenTimeShow}},watch:{atTimeShow:function(e){this.selectSearchRules.atTime=e?[{required:!0,message:"不能为空",trigger:"blur"}]:null},betweenTimeShow:function(e){e?(this.selectSearchRules.startTime=[{required:!0,message:"不能为空",trigger:"blur"}],this.selectSearchRules.endTime=[{required:!0,message:"不能为空",trigger:"blur"}]):(this.selectSearchRules.startTime=null,this.selectSearchRules.endTime=null)}},mounted:function(){this.getTypeResult()},methods:{getTypeResult:function(){var e=this;this.$refs["selectSearch"].validate((function(t){t&&r["a"].findBySelect(e.selectSearch).then((function(t){e.statType=t})).catch((function(t){h["a"].showMsg(e,t,"error")}))}))},echartShow:function(){var e=this;this.dialog.dialogEchartShow=!0,this.$nextTick((function(){e.typeSearch()}))},showDetail:function(e){var t=this,l=h["a"].copyObj(this.selectSearch);l.useFor=e.useFor,r["a"].findTypeList(l).then((function(e){t.bills=e,t.dialog.dialogBillShow=!0})).catch((function(e){t.$message({showClose:!0,message:e,type:"error"})}))},indexMethod:function(e){return e+1},getSummaries:function(){return["合计","",this.statType.totalCount,this.statType.totalSum]},typeSearch:function(){var e=this.statType.selectStaticsVOS,t=[];for(var l in e){var a={};a.value=Math.abs(e[l].sum),a.name=e[l].name+":"+e[l].sum+"元\n(共"+e[l].count+"条数据)",t.push(a)}var i=this.$refs.typeEchartId,s=c.a.init(i),r={title:{text:"帐单类型统计图",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"绝对金额（元）",type:"pie",radius:"55%",center:["50%","60%"],data:t,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};s.setOption(r)}}},d=m,p=(l("f142"),l("2877")),S=Object(p["a"])(d,a,i,!1,null,"411f6739",null);t["default"]=S.exports},e5f3:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-select",{attrs:{clearable:"",size:e.size,placeholder:"请选择"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.time_select,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)},i=[],s={name:"select-time",props:{size:String,value:String},data:function(){return{time_select:[{value:"1",label:"今天"},{value:"2",label:"昨天"},{value:"3",label:"本周"},{value:"4",label:"本月"},{value:"5",label:"="},{value:"6",label:"<="},{value:"7",label:">="},{value:"8",label:"介于"},{value:"9",label:"本年"}],selectValue:""}},watch:{selectValue:function(e,t){e!==t&&this.$emit("input",e)},value:function(e){e!==this.selectValue&&(this.selectValue=this.value)}}},c=s,r=l("2877"),o=Object(r["a"])(c,a,i,!1,null,"2decdf5a",null);t["a"]=o.exports},f142:function(e,t,l){"use strict";var a=l("9945"),i=l.n(a);i.a}}]);